---
import { Picture } from "astro:assets";
const { title, description, category, image } = Astro.props;
const imgs = import.meta.glob("../assets/img/*.webp", {
  eager: true,
}) as Record<string, ImageMetadata>;
---

<article>
  <header>
    <div class="header-image">
      {
        Object.keys(imgs).map((imgKey) => {
          const img = imgs[imgKey];
          if (imgKey.replace("../", "/src/") !== image) return null;
          return (
            <Picture
              src={img.src}
              alt={imgKey}
              width={100}
              height={100}
            />
          );
        })
      }
    </div>
    <p>
      {category}
    </p>
  </header>
  <main>
    <p>{title}</p>
    <p>{description}</p>
  </main>
  <footer>
    <p>Fridays 7:00 PM - 9:00PM</p>
    <p>Book now</p>
  </footer>
</article>

<style>
  article {
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  .header-image {
    width: 100%;
    height: 300px;
    position: relative;
  }
  img {
    width: 100%;
    object-fit: cover;
  }
  header {
    position: relative;
    & p {
      position: absolute;
      top: 10px;
      left: 20px;
      color: white;
      font-size: 104px;
      padding-top: 20px;
      padding-left: 20px;
    }
  }
  main {
    padding: 20px;
    height: calc(450px - 300px - 35px);
    p:first-child {
      font-size: 24px;
      font-weight: bold;
    }
    p:nth-child(2) {
      font-size: 14px;
      margin-top: 10px;
    }
  }
  footer {
    height: 35px;
    border-top: 1px solid grey;
    display: grid;
    grid-template-columns: 1fr 70px;
    align-items: center;
    p:first-child {
      font-size: 12px;
      color: blue;
      padding: 10px;
      margin-left: 15px;
      border-right: 1px solid grey;
    }
    p:last-child {
      font-size: 12px;
      cursor: pointer;
      text-align: center;
      align-content: center;
      display: inline-block;
      height: 100%;
      width: 100%;
    }
    p:last-child:hover {
      color: white;
      background-color: blue;
      transition: background-color 0.3s ease-in-out;
    }
  }
</style>

<!-- const imgs: Record<string, ImageMetadata> = import.meta.glob("../assets/img/*.webp", { eager: true });
---

{
Object.keys(imgs).map((imgKey) => {
  const img = imgs[imgKey];
  return(
  <Picture src={imgKey.replace("../","/src/")} alt={imgKey} width={100} height={100} />
  )

})} -->
